# 大气方案

## 天刀手游

### 流程

1. 使用两张预计算LUT来计算SkyView和SkyLight，两张LUT分别是MultiScattering和Transmittance，如下图：

   MultiScattering：

   ![AtmosphereRendering_TD1](E:\Development\UEProj\UnrealShaders\RenderPictures\SkyAtmosphereRendering\AtmosphereRendering_TD1.png)

   Transmittance：

   ![AtmosphereRendering_TD2](E:\Development\UEProj\UnrealShaders\RenderPictures\SkyAtmosphereRendering\AtmosphereRendering_TD2.png)

   SkyView（天空的辐照图贴图，用于后面渲染天空盒），这个对应于UE4里的SkyViewLut，：

   ![AtmosphereRendering_TD3](E:\Development\UEProj\UnrealShaders\RenderPictures\SkyAtmosphereRendering\AtmosphereRendering_TD3.png)

   SkyLight（天空光照，用于渲染场景中的物件）：

   ![AtmosphereRendering_TD4](E:\Development\UEProj\UnrealShaders\RenderPictures\SkyAtmosphereRendering\AtmosphereRendering_TD4.png)

   天刀场景中雾蒙蒙的效果就这通过这张图计算得到。

2. 绘制场景中的物件，植被，地形等等，会使用SkyLight来计算，作用应该就是对应UE4里的Aerial Perspective，就是为了对场景应用上大气的效果，雾蒙蒙的效果就是通过这个来计算，但是UE4中是一个3D贴图：